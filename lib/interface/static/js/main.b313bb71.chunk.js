(this["webpackJsonpreact-json-editor"]=this["webpackJsonpreact-json-editor"]||[]).push([[0],{108:function(t,e,n){"use strict";n.r(e);var a,i=n(0),o=n.n(i),c=n(157),r=n(38),s=n.n(r),u=(n(96),n(10)),l=n(4),d=n(161),b=n(50),f=n(14),j=n(56),h=n(62),O=n.n(h),p=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=o.a.useState(t),n=Object(u.a)(e,2),a=n[0],i=n[1],c=o.a.useCallback((function(){i((function(t){return!t}))}),[]);return[a,c]},v=n(145),m=n(29),g=n(164),y=n(41),w=n(156),k=n(162),x="1px solid rgb(237, 235, 233)",S=n(6),C=Object(l.u)({wrapper:{height:"inherit",position:"relative"}}),V={root:{padding:0,borderTop:x}},D=function(t,e){return t?Object(S.jsx)(v.a,{stickyPosition:m.a.Header,isScrollSynced:!0,children:e(Object(f.a)(Object(f.a)({},t),{},{styles:V}))}):null},E=function(t){var e=t.errors,n=e.map((function(t){return{key:"error-".concat(Object(k.a)()),problems:t}})),a=[{key:"informations",name:"Informations (".concat(e.length,")"),fieldName:"informations",minWidth:300,maxWidth:300,isResizable:!0}];return Object(S.jsx)(g.a,{scrollbarVisibility:y.b.auto,className:C.wrapper,children:Object(S.jsx)(w.a,{compact:!0,items:n,columns:a,checkboxVisibility:2,onRenderDetailsHeader:D})})},J=n(166),N=n(158),L=function(t){var e=t.title,n=[{key:e,text:e,onRender:function(){return Object(S.jsx)(J.a,{variant:"large",nowrap:!0,block:!0,children:e})}}];return Object(S.jsx)(N.a,{styles:{root:{alignItems:"center"}},ariaLabel:"app title",items:n})},I=(n(167),function(t){var e=t.onDownloadClick,n=t.onSaveClick,a=t.isValidJson,i=[{key:"pocdb",text:"POCDB",disabled:!0},{key:"download",text:"Download Database",ariaLabel:"Grid view",iconProps:{iconName:"Download"},onClick:e,disabled:!a},{key:"save",text:"Save Changes",ariaLabel:"Grid view",iconProps:{iconName:"Save"},onClick:n,disabled:!a}];return Object(S.jsx)(S.Fragment,{children:Object(S.jsx)(N.a,{styles:{root:{alignItems:"center"}},items:i,ariaLabel:"json content commands",children:Object(S.jsx)(J.a,{variant:"large",block:!0,children:"POCDB"})})})}),P=n(55),B=n.n(P),F=n(75),R=function(){var t=Object(F.a)(B.a.mark((function t(e){var n,a,i,o;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=Object(k.a)(),a=new Blob([e],{type:"application/json"}),!window.navigator||!window.navigator.msSaveOrOpenBlob){t.next=6;break}window.navigator.msSaveOrOpenBlob(a,n),t.next=22;break;case 6:return t.prev=6,(i=document.createElement("a")).style.display="none",document.body.appendChild(i),t.next=12,window.URL.createObjectURL(a);case 12:o=t.sent,i.href=o,i.download="".concat(n,".json"),i.click(),window.document.body.removeChild(i),t.next=22;break;case 19:t.prev=19,t.t0=t.catch(6),console.log("Error: fail to download a file.");case 22:case"end":return t.stop()}}),t,null,[[6,19]])})));return function(e){return t.apply(this,arguments)}}(),T=function(t){try{return JSON.stringify(JSON.parse(t),null,"\t")}catch(e){return t}},_=function(t){try{return JSON.parse(t)}catch(e){return{}}},A={root:{height:"inherit",borderTop:x,borderRight:x,borderBottom:x}},M=function(t){var e=t.defaultValue,n=t.schemaValue,a=t.title,o=t.path,c=void 0===o?"":o,r=t.isSchemaSampleDataOn,s=t.onChange,l=t.onSave,b=Object(j.b)(),h=Object(i.useState)([]),v=Object(u.a)(h,2),m=v[0],g=v[1],y=p(!1),w=Object(u.a)(y,2),k=w[0],x=w[1],C=Object(i.useState)(!1),V=Object(u.a)(C,2),D=V[0],J=V[1],N=Object(i.useRef)(null),P=e?T(e):void 0,B=Object(i.useCallback)((function(){var t=N.current;if(t){t.layout({width:"auto",height:"auto"});var e=t._domElement;if(e){var n=e.getBoundingClientRect(),a=n.width,i=n.height;t.layout({width:a,height:i})}}}),[]),F=Object(i.useCallback)((function(){null===b||void 0===b||b.languages.json.jsonDefaults.setDiagnosticsOptions({validate:!0,schemas:n?[{uri:window.location.href,fileMatch:["*"],schema:Object(f.a)({},_(n))}]:void 0})}),[n,b]),M=Object(i.useCallback)((function(){var t;null===(t=N.current)||void 0===t||t.getAction("editor.action.formatDocument").run()}),[]),U=Object(i.useCallback)((function(t){var e=N.current;e&&(e.setValue(t||""),t&&e.getAction("editor.action.formatDocument").run())}),[]);Object(i.useEffect)((function(){U(e)}),[e,U]),Object(i.useEffect)((function(){F()}),[n,F]),Object(i.useEffect)((function(){B()}),[r,B]),Object(i.useEffect)((function(){k&&M()}),[k,M]);var z=Object(i.useCallback)((function(t){var e,n=t.map((function(t){var e=t.startLineNumber,n=t.message;return"line ".concat(e,": ").concat(n)})),a=null===(e=N.current)||void 0===e?void 0:e.getValue(),i=n.length>0;J(!!a&&!i),g(n)}),[]),W=Object(i.useCallback)((function(t){k&&M(),s&&s(t)}),[k,M,s]);return Object(S.jsxs)(d.a,{styles:A,children:[a&&Object(S.jsx)(d.a.Item,{children:Object(S.jsx)(L,{title:a})}),Object(S.jsx)(d.a.Item,{children:Object(S.jsx)(I,{isValidJson:D,isAutoPrettifyOn:k,onAutoPrettifyChange:x,onClearClick:function(){var t;return null===(t=N.current)||void 0===t?void 0:t.setValue("")},onDownloadClick:function(){var t,e=null===(t=N.current)||void 0===t?void 0:t.getValue();e&&R(e)},onSaveClick:function(){var t,e=null===(t=N.current)||void 0===t?void 0:t.getValue();e&&l&&l(e)},onMinifyClick:function(){var t=N.current;if(t){var e=function(t){try{return JSON.stringify(JSON.parse(t),null)}catch(e){return t}}(t.getValue());t.setValue(e)}},onPrettifyClick:M,onUploadClick:function(t){var e=new FileReader;e.onload=function(){var t=e.result;U(t)},e.readAsText(t)},onFixClick:function(){var t=N.current,e=t&&t.getValue(),n=e&&O.a.parse(e),a=n&&T(JSON.stringify(n));t&&t.setValue(a)}})}),Object(S.jsxs)(d.a,{styles:A,children:[Object(S.jsx)(d.a.Item,{grow:!0,align:"stretch",style:{height:"calc(100% - 20vh)"},children:Object(S.jsx)(j.a,{language:"json",path:c,options:{automaticLayout:!0,autoClosingBrackets:"always",autoClosingQuotes:"always",formatOnPaste:!0,formatOnType:!0,scrollBeyondLastLine:!1},onMount:function(t){var n;N.current=t,null===(n=t.getModel())||void 0===n||n.updateOptions({tabSize:2,insertSpaces:!1}),B(),window.addEventListener("resize",(function(){B()})),e&&U(T(e))},onChange:W,beforeMount:function(){return F()},onValidate:z,defaultValue:P})}),Object(S.jsx)(d.a.Item,{style:{height:"20vh"},children:Object(S.jsx)(E,{errors:m})})]})]})},U='{ "name": "sample schema", "type": "object", "properties": { "name": { "title": "Name", "type": "string", "description": "Users full name supporting unicode but no emojis.", "maxLength": 20 }, "email": { "title": "Email", "description": "Like a postal address but for computers.", "type": "string", "format": "email" }, "date_of_birth": { "title": "Date Of Birth", "type": "string", "description": "Date of uses birth in the one and only date standard: ISO 8601.", "format": "date", "example": "1990\u201312\u201328" } }, "required": [ "name" ] }',z=n(26),W=n.n(z),G=function(t){function e(t,n){return W.a.isObject(t)?W.a.toPairs(t).reduce((function(t,a){var i=e(a[1],"".concat(n,".").concat(a[0]));return 2!==i.length||W.a.isObject(i[0])||W.a.isObject(i[1])?t.concat(i):t.concat([i])}),[]):[n,t]}return W.a.isObject(t)?W.a.toPairs(t).reduce((function(t,n){var a=e(n[1],n[0]);return 2!==a.length||W.a.isObject(a[0])||W.a.isObject(a[1])?t.concat(a):t.concat([a])}),[]).reduce((function(t,e){var n=Object(u.a)(e,2),a=n[0],i=n[1];return t[a]=i,t}),{}):JSON.stringify(t)};!function(t){t.Schema="Schema",t.InputJson="Input JSON"}(a||(a={}));var H=function(){return{root:{height:"100vh"}}},q={root:{height:"100%"}},Q=function(t){var e=t.isFullWidth;return Object(l.u)({root:[{width:"50%",height:"100%"},e&&{width:"100%",height:"100%"}]})},K=function(){var t=p(!1),e=Object(u.a)(t,1)[0],n=p(!1),o=Object(u.a)(n,2),c=o[0],r=o[1],s=Object(i.useState)(void 0),l=Object(u.a)(s,1)[0],f=Object(i.useState)(void 0),j=Object(u.a)(f,2),h=j[0],O=j[1],v=function(t,e){fetch("http://127.0.0.1:2222/_database/".concat(t.split(".").join("/")),{method:"PUT",body:JSON.stringify({value:e})})};Object(i.useEffect)((function(){fetch("http://127.0.0.1:2222/_database").then((function(t){return t.json()})).then((function(t){O(JSON.stringify(t.value))}))}),[]),Object(i.useEffect)((function(){!e&&c&&r()}),[e,c,r]);return Object(S.jsx)(d.a,{styles:H,children:Object(S.jsx)(d.a,{wrap:!0,horizontal:!0,grow:!0,styles:q,children:Object(S.jsx)(d.a.Item,{styles:Q({isFullWidth:!e}),children:Object(S.jsx)(M,{title:e?a.InputJson:"",path:"input_json.json",schemaValue:c&&!l?U:l,isSchemaSampleDataOn:c,defaultValue:h,onSave:function(t){var e=JSON.parse(t),n=JSON.parse(h),a=Object(b.a)(n,e),i=G(a),o=Object(b.b)(n,e),c=G(o);Object.keys(c).forEach((function(t){!function(t){fetch("http://127.0.0.1:2222/_database/".concat(t.split(".").join("/")),{method:"DELETE"})}(t)})),Object.keys(i).forEach((function(t){var e=i[t];v(t,e)}));var r=Object(b.c)(n,e),s=G(r);Object.keys(s).forEach((function(t){var e=i[t];v(t,e)}))}})})})})},X=function(){return Object(S.jsx)(K,{})},Y=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,172)).then((function(e){var n=e.getCLS,a=e.getFID,i=e.getFCP,o=e.getLCP,c=e.getTTFB;n(t),a(t),i(t),o(t),c(t)}))};s.a.render(Object(S.jsx)(X,{}),document.getElementById("root")),Y(),Object(c.a)()},96:function(t,e,n){}},[[108,1,2]]]);
//# sourceMappingURL=main.b313bb71.chunk.js.map